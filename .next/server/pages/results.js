"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/results";
exports.ids = ["pages/results"];
exports.modules = {

/***/ "./pages/results.js":
/*!**************************!*\
  !*** ./pages/results.js ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Results)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"next/router\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var socket_io_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! socket.io-client */ \"socket.io-client\");\n/* harmony import */ var _utils_resolveImageUrl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/resolveImageUrl */ \"./utils/resolveImageUrl.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([socket_io_client__WEBPACK_IMPORTED_MODULE_3__]);\nsocket_io_client__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// frontend/pages/results.js\n\n\n\n\n\nfunction PopupModal({ show , message , onClose  }) {\n    if (!show) return null;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"glass-card w-full max-w-sm px-6 py-6 text-center\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                    className: \"text-sm text-slate-700\",\n                    children: message\n                }, void 0, false, {\n                    fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                    lineNumber: 12,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                    onClick: onClose,\n                    className: \"mt-4 inline-flex rounded-full bg-blue-600 px-5 py-2 text-sm font-semibold text-white shadow-sm transition hover:bg-blue-500\",\n                    children: \"OK\"\n                }, void 0, false, {\n                    fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                    lineNumber: 13,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n            lineNumber: 11,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n        lineNumber: 10,\n        columnNumber: 5\n    }, this);\n}\nconst serverUrl = \"http://localhost:5050\";\nconst placeholderImage = \"/placeholder.svg\";\nconst buildPhotoSrc = (...values)=>{\n    for (const raw of values){\n        const resolved = (0,_utils_resolveImageUrl__WEBPACK_IMPORTED_MODULE_4__.resolveImageUrl)(raw, serverUrl);\n        if (resolved) {\n            return resolved;\n        }\n    }\n    return placeholderImage;\n};\nconst handleImgError = (event)=>{\n    event.currentTarget.onerror = null;\n    event.currentTarget.src = placeholderImage;\n};\nfunction Results() {\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const [socket, setSocket] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [results, setResults] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [canView, setCanView] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [totalVotes, setTotalVotes] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [message, setMessage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [showPopup, setShowPopup] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const userId =  false ? 0 : null;\n    const [periodId, setPeriodId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [authReady, setAuthReady] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (true) return;\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n            router.replace(\"/login\");\n            return;\n        }\n        setAuthReady(true);\n    }, [\n        router\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!authReady) return;\n        const newSocket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(serverUrl);\n        setSocket(newSocket);\n        return ()=>newSocket.close();\n    }, [\n        authReady\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!authReady || !socket) return;\n        // When results are published, refresh\n        socket.on(\"resultsPublished\", ()=>{\n            setMessage(\"Results have just been published!\");\n            setShowPopup(true);\n            if (periodId && userId) fetchResults(periodId, userId);\n        });\n        socket.on(\"votingStarted\", ()=>{\n            // If a new voting started, reset this page if needed\n            setResults([]);\n            setCanView(false);\n        });\n        return ()=>{\n            socket.off(\"resultsPublished\");\n            socket.off(\"votingStarted\");\n        };\n    }, [\n        socket,\n        periodId,\n        userId\n    ]);\n    const closePopup = ()=>{\n        setShowPopup(false);\n        setMessage(\"\");\n    };\n    // First, fetch the current period\n    const fetchCurrentPeriod = async ()=>{\n        try {\n            const res = await fetch(`${serverUrl}/api/public/period`);\n            if (!res.ok) {\n                setPeriodId(null);\n                setResults([]);\n                setCanView(false);\n                return;\n            }\n            const data = await res.json();\n            if (data && data.id) {\n                setPeriodId(data.id);\n                if (userId) fetchResults(data.id, userId);\n            } else {\n                setPeriodId(null);\n                setResults([]);\n                setCanView(false);\n            }\n        } catch  {\n            setPeriodId(null);\n            setResults([]);\n            setCanView(false);\n        }\n    };\n    const fetchResults = async (pid, uid)=>{\n        const url = `${serverUrl}/api/public/public-results?periodId=${pid}&userId=${uid}`;\n        const res = await fetch(url);\n        if (!res.ok) {\n            setCanView(false);\n            setResults([]);\n            setTotalVotes(0);\n            return;\n        }\n        const data = await res.json();\n        if (data.noParticipation) {\n            setCanView(false);\n            setResults([]);\n            setTotalVotes(0);\n            setMessage(\"You didn't participate in this voting session, so you cannot view the results.\");\n            setShowPopup(true);\n            return;\n        }\n        if (data.published) {\n            setCanView(true);\n            setResults(data.results);\n            const sum = data.results.reduce((acc, cur)=>acc + cur.votes, 0);\n            setTotalVotes(sum);\n        } else {\n            setCanView(false);\n            setResults([]);\n            setTotalVotes(0);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!authReady) return;\n        fetchCurrentPeriod();\n    }, [\n        authReady\n    ]);\n    if (!authReady) {\n        return null;\n    }\n    if (!canView) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PopupModal, {\n                    show: showPopup,\n                    message: message,\n                    onClose: closePopup\n                }, void 0, false, {\n                    fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                    lineNumber: 162,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mx-auto max-w-xl\",\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"glass-card px-8 py-12 text-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-2xl font-semibold text-slate-900\",\n                                children: \"Results not available\"\n                            }, void 0, false, {\n                                fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                                lineNumber: 165,\n                                columnNumber: 13\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"mt-4 text-slate-600\",\n                                children: message || \"Please wait until results are published or confirm you participated in the voting session.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                                lineNumber: 166,\n                                columnNumber: 13\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                        lineNumber: 164,\n                        columnNumber: 11\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                    lineNumber: 163,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true);\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(PopupModal, {\n                show: showPopup,\n                message: message,\n                onClose: closePopup\n            }, void 0, false, {\n                fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                lineNumber: 177,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"space-y-8\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n                        className: \"glass-card mx-auto max-w-4xl px-8 py-10 text-center\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h1\", {\n                                className: \"text-3xl font-bold text-slate-900\",\n                                children: \"Election Results\"\n                            }, void 0, false, {\n                                fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                                lineNumber: 180,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"mt-4 text-sm font-medium uppercase tracking-[0.3em] text-blue-600\",\n                                children: [\n                                    \"Total Votes Cast: \",\n                                    totalVotes\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                                lineNumber: 181,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                className: \"mt-4 text-slate-600\",\n                                children: \"Only participants of this voting period can view the final tally. Share the results responsibly.\"\n                            }, void 0, false, {\n                                fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                                lineNumber: 184,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                        lineNumber: 179,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        className: \"mx-auto grid w-full max-w-6xl gap-6 sm:grid-cols-2 lg:grid-cols-3\",\n                        children: results.map((result)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                className: \"glass-card flex h-full flex-col items-center gap-4 px-6 py-8 text-center\",\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"img\", {\n                                        src: buildPhotoSrc(result.photoSrc, result.photoUrl),\n                                        onError: handleImgError,\n                                        alt: result.name,\n                                        className: \"h-24 w-24 rounded-full border border-slate-200 object-cover shadow-sm\"\n                                    }, void 0, false, {\n                                        fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                                        lineNumber: 195,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        children: [\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                                className: \"text-lg font-semibold text-slate-900\",\n                                                children: result.name\n                                            }, void 0, false, {\n                                                fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                                                lineNumber: 202,\n                                                columnNumber: 17\n                                            }, this),\n                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                                                className: \"mt-1 text-sm text-slate-500\",\n                                                children: result.lga\n                                            }, void 0, false, {\n                                                fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                                                lineNumber: 203,\n                                                columnNumber: 17\n                                            }, this)\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                                        lineNumber: 201,\n                                        columnNumber: 15\n                                    }, this),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                        className: \"mt-auto flex items-center gap-2 rounded-full border border-blue-200 bg-blue-50 px-4 py-1 text-sm font-semibold text-blue-700\",\n                                        children: [\n                                            result.votes,\n                                            \" Votes\"\n                                        ]\n                                    }, void 0, true, {\n                                        fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                                        lineNumber: 205,\n                                        columnNumber: 15\n                                    }, this)\n                                ]\n                            }, result.name, true, {\n                                fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                                lineNumber: 191,\n                                columnNumber: 13\n                            }, this))\n                    }, void 0, false, {\n                        fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                        lineNumber: 189,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/sanmi/Documents/Tech Learn/WebProjects/EVote/pages/results.js\",\n                lineNumber: 178,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true);\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUQsV0FBVTs7b0NBQW9FO29DQUM1RDBCOzs7Ozs7OzBDQUVyQiw4REFBQ3pCO2dDQUFFRCxXQUFVOzBDQUFzQjs7Ozs7Ozs7Ozs7O2tDQUtyQyw4REFBQ0Q7d0JBQUlDLFdBQVU7a0NBQ1pzQixRQUFRMkMsR0FBRyxDQUFDLENBQUNDLHVCQUNaLDhEQUFDbkU7Z0NBRUNDLFdBQVU7O2tEQUVWLDhEQUFDbUU7d0NBQ0NsRCxLQUFLUixjQUFjeUQsT0FBT0UsUUFBUSxFQUFFRixPQUFPRyxRQUFRO3dDQUNuREMsU0FBU3pEO3dDQUNUMEQsS0FBS0wsT0FBT00sSUFBSTt3Q0FDaEJ4RSxXQUFVOzs7Ozs7a0RBRVosOERBQUNEOzswREFDQyw4REFBQzBFO2dEQUFHekUsV0FBVTswREFBd0NrRSxPQUFPTSxJQUFJOzs7Ozs7MERBQ2pFLDhEQUFDdkU7Z0RBQUVELFdBQVU7MERBQStCa0UsT0FBT1EsR0FBRzs7Ozs7Ozs7Ozs7O2tEQUV4RCw4REFBQzNFO3dDQUFJQyxXQUFVOzs0Q0FDWmtFLE9BQU9KLEtBQUs7NENBQUM7Ozs7Ozs7OytCQWRYSSxPQUFPTSxJQUFJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFzQjlCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92b3RpbmctYXBwLy4vcGFnZXMvcmVzdWx0cy5qcz83YjQ2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIGZyb250ZW5kL3BhZ2VzL3Jlc3VsdHMuanNcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IGlvIGZyb20gXCJzb2NrZXQuaW8tY2xpZW50XCI7XG5pbXBvcnQgeyByZXNvbHZlSW1hZ2VVcmwgfSBmcm9tIFwiLi4vdXRpbHMvcmVzb2x2ZUltYWdlVXJsXCI7XG5cbmZ1bmN0aW9uIFBvcHVwTW9kYWwoeyBzaG93LCBtZXNzYWdlLCBvbkNsb3NlIH0pIHtcbiAgaWYgKCFzaG93KSByZXR1cm4gbnVsbDtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZpeGVkIGluc2V0LTAgei01MCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1zbGF0ZS05MDAvNjAgYmFja2Ryb3AtYmx1clwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJnbGFzcy1jYXJkIHctZnVsbCBtYXgtdy1zbSBweC02IHB5LTYgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC1zbSB0ZXh0LXNsYXRlLTcwMFwiPnttZXNzYWdlfTwvcD5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIG9uQ2xpY2s9e29uQ2xvc2V9XG4gICAgICAgICAgY2xhc3NOYW1lPVwibXQtNCBpbmxpbmUtZmxleCByb3VuZGVkLWZ1bGwgYmctYmx1ZS02MDAgcHgtNSBweS0yIHRleHQtc20gZm9udC1zZW1pYm9sZCB0ZXh0LXdoaXRlIHNoYWRvdy1zbSB0cmFuc2l0aW9uIGhvdmVyOmJnLWJsdWUtNTAwXCJcbiAgICAgICAgPlxuICAgICAgICAgIE9LXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmNvbnN0IHNlcnZlclVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0FQSV9VUkw7XG5jb25zdCBwbGFjZWhvbGRlckltYWdlID0gXCIvcGxhY2Vob2xkZXIuc3ZnXCI7XG5jb25zdCBidWlsZFBob3RvU3JjID0gKC4uLnZhbHVlcykgPT4ge1xuICBmb3IgKGNvbnN0IHJhdyBvZiB2YWx1ZXMpIHtcbiAgICBjb25zdCByZXNvbHZlZCA9IHJlc29sdmVJbWFnZVVybChyYXcsIHNlcnZlclVybCk7XG4gICAgaWYgKHJlc29sdmVkKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZWQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBwbGFjZWhvbGRlckltYWdlO1xufTtcbmNvbnN0IGhhbmRsZUltZ0Vycm9yID0gKGV2ZW50KSA9PiB7XG4gIGV2ZW50LmN1cnJlbnRUYXJnZXQub25lcnJvciA9IG51bGw7XG4gIGV2ZW50LmN1cnJlbnRUYXJnZXQuc3JjID0gcGxhY2Vob2xkZXJJbWFnZTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJlc3VsdHMoKSB7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuICBjb25zdCBbc29ja2V0LCBzZXRTb2NrZXRdID0gdXNlU3RhdGUobnVsbCk7XG4gIGNvbnN0IFtyZXN1bHRzLCBzZXRSZXN1bHRzXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2NhblZpZXcsIHNldENhblZpZXddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbdG90YWxWb3Rlcywgc2V0VG90YWxWb3Rlc10gPSB1c2VTdGF0ZSgwKTtcbiAgY29uc3QgW21lc3NhZ2UsIHNldE1lc3NhZ2VdID0gdXNlU3RhdGUoXCJcIik7XG4gIGNvbnN0IFtzaG93UG9wdXAsIHNldFNob3dQb3B1cF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgY29uc3QgdXNlcklkID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidXNlcklkXCIpIDogbnVsbDtcbiAgY29uc3QgW3BlcmlvZElkLCBzZXRQZXJpb2RJZF0gPSB1c2VTdGF0ZShudWxsKTtcbiAgY29uc3QgW2F1dGhSZWFkeSwgc2V0QXV0aFJlYWR5XSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKSByZXR1cm47XG4gICAgY29uc3QgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRva2VuXCIpO1xuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJvdXRlci5yZXBsYWNlKFwiL2xvZ2luXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzZXRBdXRoUmVhZHkodHJ1ZSk7XG4gIH0sIFtyb3V0ZXJdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYXV0aFJlYWR5KSByZXR1cm47XG4gICAgY29uc3QgbmV3U29ja2V0ID0gaW8oc2VydmVyVXJsKTtcbiAgICBzZXRTb2NrZXQobmV3U29ja2V0KTtcbiAgICByZXR1cm4gKCkgPT4gbmV3U29ja2V0LmNsb3NlKCk7XG4gIH0sIFthdXRoUmVhZHldKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghYXV0aFJlYWR5IHx8ICFzb2NrZXQpIHJldHVybjtcbiAgICAvLyBXaGVuIHJlc3VsdHMgYXJlIHB1Ymxpc2hlZCwgcmVmcmVzaFxuICAgIHNvY2tldC5vbihcInJlc3VsdHNQdWJsaXNoZWRcIiwgKCkgPT4ge1xuICAgICAgc2V0TWVzc2FnZShcIlJlc3VsdHMgaGF2ZSBqdXN0IGJlZW4gcHVibGlzaGVkIVwiKTtcbiAgICAgIHNldFNob3dQb3B1cCh0cnVlKTtcbiAgICAgIGlmIChwZXJpb2RJZCAmJiB1c2VySWQpIGZldGNoUmVzdWx0cyhwZXJpb2RJZCwgdXNlcklkKTtcbiAgICB9KTtcbiAgICBzb2NrZXQub24oXCJ2b3RpbmdTdGFydGVkXCIsICgpID0+IHtcbiAgICAgIC8vIElmIGEgbmV3IHZvdGluZyBzdGFydGVkLCByZXNldCB0aGlzIHBhZ2UgaWYgbmVlZGVkXG4gICAgICBzZXRSZXN1bHRzKFtdKTtcbiAgICAgIHNldENhblZpZXcoZmFsc2UpO1xuICAgIH0pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBzb2NrZXQub2ZmKFwicmVzdWx0c1B1Ymxpc2hlZFwiKTtcbiAgICAgIHNvY2tldC5vZmYoXCJ2b3RpbmdTdGFydGVkXCIpO1xuICAgIH07XG4gIH0sIFtzb2NrZXQsIHBlcmlvZElkLCB1c2VySWRdKTtcblxuICBjb25zdCBjbG9zZVBvcHVwID0gKCkgPT4ge1xuICAgIHNldFNob3dQb3B1cChmYWxzZSk7XG4gICAgc2V0TWVzc2FnZShcIlwiKTtcbiAgfTtcblxuICAvLyBGaXJzdCwgZmV0Y2ggdGhlIGN1cnJlbnQgcGVyaW9kXG4gIGNvbnN0IGZldGNoQ3VycmVudFBlcmlvZCA9IGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goYCR7c2VydmVyVXJsfS9hcGkvcHVibGljL3BlcmlvZGApO1xuICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgc2V0UGVyaW9kSWQobnVsbCk7XG4gICAgICAgIHNldFJlc3VsdHMoW10pO1xuICAgICAgICBzZXRDYW5WaWV3KGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICBpZiAoZGF0YSAmJiBkYXRhLmlkKSB7XG4gICAgICAgIHNldFBlcmlvZElkKGRhdGEuaWQpO1xuICAgICAgICBpZiAodXNlcklkKSBmZXRjaFJlc3VsdHMoZGF0YS5pZCwgdXNlcklkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFBlcmlvZElkKG51bGwpO1xuICAgICAgICBzZXRSZXN1bHRzKFtdKTtcbiAgICAgICAgc2V0Q2FuVmlldyhmYWxzZSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7XG4gICAgICBzZXRQZXJpb2RJZChudWxsKTtcbiAgICAgIHNldFJlc3VsdHMoW10pO1xuICAgICAgc2V0Q2FuVmlldyhmYWxzZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGZldGNoUmVzdWx0cyA9IGFzeW5jIChwaWQsIHVpZCkgPT4ge1xuICAgIGNvbnN0IHVybCA9IGAke3NlcnZlclVybH0vYXBpL3B1YmxpYy9wdWJsaWMtcmVzdWx0cz9wZXJpb2RJZD0ke3BpZH0mdXNlcklkPSR7dWlkfWA7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsKTtcbiAgICBpZiAoIXJlcy5vaykge1xuICAgICAgc2V0Q2FuVmlldyhmYWxzZSk7XG4gICAgICBzZXRSZXN1bHRzKFtdKTtcbiAgICAgIHNldFRvdGFsVm90ZXMoMCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXMuanNvbigpO1xuICAgIGlmIChkYXRhLm5vUGFydGljaXBhdGlvbikge1xuICAgICAgc2V0Q2FuVmlldyhmYWxzZSk7XG4gICAgICBzZXRSZXN1bHRzKFtdKTtcbiAgICAgIHNldFRvdGFsVm90ZXMoMCk7XG4gICAgICBzZXRNZXNzYWdlKFwiWW91IGRpZG4ndCBwYXJ0aWNpcGF0ZSBpbiB0aGlzIHZvdGluZyBzZXNzaW9uLCBzbyB5b3UgY2Fubm90IHZpZXcgdGhlIHJlc3VsdHMuXCIpO1xuICAgICAgc2V0U2hvd1BvcHVwKHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZGF0YS5wdWJsaXNoZWQpIHtcbiAgICAgIHNldENhblZpZXcodHJ1ZSk7XG4gICAgICBzZXRSZXN1bHRzKGRhdGEucmVzdWx0cyk7XG4gICAgICBjb25zdCBzdW0gPSBkYXRhLnJlc3VsdHMucmVkdWNlKChhY2MsIGN1cikgPT4gYWNjICsgY3VyLnZvdGVzLCAwKTtcbiAgICAgIHNldFRvdGFsVm90ZXMoc3VtKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0Q2FuVmlldyhmYWxzZSk7XG4gICAgICBzZXRSZXN1bHRzKFtdKTtcbiAgICAgIHNldFRvdGFsVm90ZXMoMCk7XG4gICAgfVxuICB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFhdXRoUmVhZHkpIHJldHVybjtcbiAgICBmZXRjaEN1cnJlbnRQZXJpb2QoKTtcbiAgfSwgW2F1dGhSZWFkeV0pO1xuXG4gIGlmICghYXV0aFJlYWR5KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoIWNhblZpZXcpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPD5cbiAgICAgICAgPFBvcHVwTW9kYWwgc2hvdz17c2hvd1BvcHVwfSBtZXNzYWdlPXttZXNzYWdlfSBvbkNsb3NlPXtjbG9zZVBvcHVwfSAvPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gbWF4LXcteGxcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdsYXNzLWNhcmQgcHgtOCBweS0xMiB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgPGgxIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS05MDBcIj5SZXN1bHRzIG5vdCBhdmFpbGFibGU8L2gxPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LXNsYXRlLTYwMFwiPlxuICAgICAgICAgICAgICB7bWVzc2FnZSB8fCBcIlBsZWFzZSB3YWl0IHVudGlsIHJlc3VsdHMgYXJlIHB1Ymxpc2hlZCBvciBjb25maXJtIHlvdSBwYXJ0aWNpcGF0ZWQgaW4gdGhlIHZvdGluZyBzZXNzaW9uLlwifVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvPlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICA8UG9wdXBNb2RhbCBzaG93PXtzaG93UG9wdXB9IG1lc3NhZ2U9e21lc3NhZ2V9IG9uQ2xvc2U9e2Nsb3NlUG9wdXB9IC8+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktOFwiPlxuICAgICAgICA8c2VjdGlvbiBjbGFzc05hbWU9XCJnbGFzcy1jYXJkIG14LWF1dG8gbWF4LXctNHhsIHB4LTggcHktMTAgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICA8aDEgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkIHRleHQtc2xhdGUtOTAwXCI+RWxlY3Rpb24gUmVzdWx0czwvaDE+XG4gICAgICAgICAgPHAgY2xhc3NOYW1lPVwibXQtNCB0ZXh0LXNtIGZvbnQtbWVkaXVtIHVwcGVyY2FzZSB0cmFja2luZy1bMC4zZW1dIHRleHQtYmx1ZS02MDBcIj5cbiAgICAgICAgICAgIFRvdGFsIFZvdGVzIENhc3Q6IHt0b3RhbFZvdGVzfVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC00IHRleHQtc2xhdGUtNjAwXCI+XG4gICAgICAgICAgICBPbmx5IHBhcnRpY2lwYW50cyBvZiB0aGlzIHZvdGluZyBwZXJpb2QgY2FuIHZpZXcgdGhlIGZpbmFsIHRhbGx5LiBTaGFyZSB0aGUgcmVzdWx0cyByZXNwb25zaWJseS5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvc2VjdGlvbj5cblxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm14LWF1dG8gZ3JpZCB3LWZ1bGwgbWF4LXctNnhsIGdhcC02IHNtOmdyaWQtY29scy0yIGxnOmdyaWQtY29scy0zXCI+XG4gICAgICAgICAge3Jlc3VsdHMubWFwKChyZXN1bHQpID0+IChcbiAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAga2V5PXtyZXN1bHQubmFtZX1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiZ2xhc3MtY2FyZCBmbGV4IGgtZnVsbCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgZ2FwLTQgcHgtNiBweS04IHRleHQtY2VudGVyXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGltZ1xuICAgICAgICAgICAgICAgIHNyYz17YnVpbGRQaG90b1NyYyhyZXN1bHQucGhvdG9TcmMsIHJlc3VsdC5waG90b1VybCl9XG4gICAgICAgICAgICAgICAgb25FcnJvcj17aGFuZGxlSW1nRXJyb3J9XG4gICAgICAgICAgICAgICAgYWx0PXtyZXN1bHQubmFtZX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJoLTI0IHctMjQgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItc2xhdGUtMjAwIG9iamVjdC1jb3ZlciBzaGFkb3ctc21cIlxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJ0ZXh0LWxnIGZvbnQtc2VtaWJvbGQgdGV4dC1zbGF0ZS05MDBcIj57cmVzdWx0Lm5hbWV9PC9oMj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtdC0xIHRleHQtc20gdGV4dC1zbGF0ZS01MDBcIj57cmVzdWx0LmxnYX08L3A+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm10LWF1dG8gZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTIgcm91bmRlZC1mdWxsIGJvcmRlciBib3JkZXItYmx1ZS0yMDAgYmctYmx1ZS01MCBweC00IHB5LTEgdGV4dC1zbSBmb250LXNlbWlib2xkIHRleHQtYmx1ZS03MDBcIj5cbiAgICAgICAgICAgICAgICB7cmVzdWx0LnZvdGVzfSBWb3Rlc1xuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICkpfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvPlxuICApO1xufVxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUm91dGVyIiwiaW8iLCJyZXNvbHZlSW1hZ2VVcmwiLCJQb3B1cE1vZGFsIiwic2hvdyIsIm1lc3NhZ2UiLCJvbkNsb3NlIiwiZGl2IiwiY2xhc3NOYW1lIiwicCIsImJ1dHRvbiIsIm9uQ2xpY2siLCJzZXJ2ZXJVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQVBJX1VSTCIsInBsYWNlaG9sZGVySW1hZ2UiLCJidWlsZFBob3RvU3JjIiwidmFsdWVzIiwicmF3IiwicmVzb2x2ZWQiLCJoYW5kbGVJbWdFcnJvciIsImV2ZW50IiwiY3VycmVudFRhcmdldCIsIm9uZXJyb3IiLCJzcmMiLCJSZXN1bHRzIiwicm91dGVyIiwic29ja2V0Iiwic2V0U29ja2V0IiwicmVzdWx0cyIsInNldFJlc3VsdHMiLCJjYW5WaWV3Iiwic2V0Q2FuVmlldyIsInRvdGFsVm90ZXMiLCJzZXRUb3RhbFZvdGVzIiwic2V0TWVzc2FnZSIsInNob3dQb3B1cCIsInNldFNob3dQb3B1cCIsInVzZXJJZCIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwZXJpb2RJZCIsInNldFBlcmlvZElkIiwiYXV0aFJlYWR5Iiwic2V0QXV0aFJlYWR5IiwidG9rZW4iLCJyZXBsYWNlIiwibmV3U29ja2V0IiwiY2xvc2UiLCJvbiIsImZldGNoUmVzdWx0cyIsIm9mZiIsImNsb3NlUG9wdXAiLCJmZXRjaEN1cnJlbnRQZXJpb2QiLCJyZXMiLCJmZXRjaCIsIm9rIiwiZGF0YSIsImpzb24iLCJpZCIsInBpZCIsInVpZCIsInVybCIsIm5vUGFydGljaXBhdGlvbiIsInB1Ymxpc2hlZCIsInN1bSIsInJlZHVjZSIsImFjYyIsImN1ciIsInZvdGVzIiwiaDEiLCJzZWN0aW9uIiwibWFwIiwicmVzdWx0IiwiaW1nIiwicGhvdG9TcmMiLCJwaG90b1VybCIsIm9uRXJyb3IiLCJhbHQiLCJuYW1lIiwiaDIiLCJsZ2EiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/results.js\n");

/***/ }),

/***/ "./utils/resolveImageUrl.js":
/*!**********************************!*\
  !*** ./utils/resolveImageUrl.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"resolveImageUrl\": () => (/* binding */ resolveImageUrl)\n/* harmony export */ });\nconst resolveImageUrl = (value, baseUrl)=>{\n    if (!value) return null;\n    const stringValue = typeof value === \"string\" ? value : String(value);\n    const trimmed = stringValue.trim();\n    if (!trimmed) return null;\n    if (trimmed.startsWith(\"data:\")) return trimmed;\n    if (/^https?:\\/\\//i.test(trimmed)) return trimmed.replace(/\\\\/g, \"/\");\n    const fallbackBase = baseUrl || (typeof process !== \"undefined\" ? \"http://localhost:5050\" : undefined) || ( false ? 0 : undefined) || \"\";\n    try {\n        const url = new URL(trimmed.replace(/\\\\/g, \"/\"), fallbackBase || undefined);\n        return url.href;\n    } catch (error) {\n        if (!trimmed.startsWith(\"/\")) {\n            return `/${trimmed.replace(/^\\.\\//, \"\")}`;\n        }\n        return trimmed;\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlscy9yZXNvbHZlSW1hZ2VVcmwuanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLGtCQUFrQixDQUFDQyxPQUFPQyxVQUFZO0lBQ2pELElBQUksQ0FBQ0QsT0FBTyxPQUFPLElBQUk7SUFDdkIsTUFBTUUsY0FBYyxPQUFPRixVQUFVLFdBQVdBLFFBQVFHLE9BQU9ILE1BQU07SUFDckUsTUFBTUksVUFBVUYsWUFBWUcsSUFBSTtJQUNoQyxJQUFJLENBQUNELFNBQVMsT0FBTyxJQUFJO0lBQ3pCLElBQUlBLFFBQVFFLFVBQVUsQ0FBQyxVQUFVLE9BQU9GO0lBRXhDLElBQUksZ0JBQWdCRyxJQUFJLENBQUNILFVBQVUsT0FBT0EsUUFBUUksT0FBTyxDQUFDLE9BQU87SUFFakUsTUFBTUMsZUFDSlIsV0FDQyxRQUFPUyxZQUFZLGNBQWNBLHVCQUErQixHQUFHRyxTQUFTLEtBQzVFLE9BQWdELEdBQUdDLENBQXNCLEdBQUdELFNBQVMsS0FDdEY7SUFFRixJQUFJO1FBQ0YsTUFBTUksTUFBTSxJQUFJQyxJQUFJZCxRQUFRSSxPQUFPLENBQUMsT0FBTyxNQUFNQyxnQkFBZ0JJO1FBQ2pFLE9BQU9JLElBQUlFLElBQUk7SUFDakIsRUFBRSxPQUFPQyxPQUFPO1FBQ2QsSUFBSSxDQUFDaEIsUUFBUUUsVUFBVSxDQUFDLE1BQU07WUFDNUIsT0FBTyxDQUFDLENBQUMsRUFBRUYsUUFBUUksT0FBTyxDQUFDLFNBQVMsSUFBSSxDQUFDO1FBQzNDLENBQUM7UUFDRCxPQUFPSjtJQUNUO0FBQ0YsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3ZvdGluZy1hcHAvLi91dGlscy9yZXNvbHZlSW1hZ2VVcmwuanM/YmU2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgcmVzb2x2ZUltYWdlVXJsID0gKHZhbHVlLCBiYXNlVXJsKSA9PiB7XG4gIGlmICghdmFsdWUpIHJldHVybiBudWxsO1xuICBjb25zdCBzdHJpbmdWYWx1ZSA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHZhbHVlIDogU3RyaW5nKHZhbHVlKTtcbiAgY29uc3QgdHJpbW1lZCA9IHN0cmluZ1ZhbHVlLnRyaW0oKTtcbiAgaWYgKCF0cmltbWVkKSByZXR1cm4gbnVsbDtcbiAgaWYgKHRyaW1tZWQuc3RhcnRzV2l0aChcImRhdGE6XCIpKSByZXR1cm4gdHJpbW1lZDtcblxuICBpZiAoL15odHRwcz86XFwvXFwvL2kudGVzdCh0cmltbWVkKSkgcmV0dXJuIHRyaW1tZWQucmVwbGFjZSgvXFxcXC9nLCBcIi9cIik7XG5cbiAgY29uc3QgZmFsbGJhY2tCYXNlID1cbiAgICBiYXNlVXJsIHx8XG4gICAgKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiID8gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCA6IHVuZGVmaW5lZCkgfHxcbiAgICAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubG9jYXRpb24gPyB3aW5kb3cubG9jYXRpb24ub3JpZ2luIDogdW5kZWZpbmVkKSB8fFxuICAgIFwiXCI7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHRyaW1tZWQucmVwbGFjZSgvXFxcXC9nLCBcIi9cIiksIGZhbGxiYWNrQmFzZSB8fCB1bmRlZmluZWQpO1xuICAgIHJldHVybiB1cmwuaHJlZjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoIXRyaW1tZWQuc3RhcnRzV2l0aChcIi9cIikpIHtcbiAgICAgIHJldHVybiBgLyR7dHJpbW1lZC5yZXBsYWNlKC9eXFwuXFwvLywgXCJcIil9YDtcbiAgICB9XG4gICAgcmV0dXJuIHRyaW1tZWQ7XG4gIH1cbn07XG4iXSwibmFtZXMiOlsicmVzb2x2ZUltYWdlVXJsIiwidmFsdWUiLCJiYXNlVXJsIiwic3RyaW5nVmFsdWUiLCJTdHJpbmciLCJ0cmltbWVkIiwidHJpbSIsInN0YXJ0c1dpdGgiLCJ0ZXN0IiwicmVwbGFjZSIsImZhbGxiYWNrQmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUElfVVJMIiwidW5kZWZpbmVkIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJ1cmwiLCJVUkwiLCJocmVmIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./utils/resolveImageUrl.js\n");

/***/ }),

/***/ "next/router":
/*!******************************!*\
  !*** external "next/router" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("next/router");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

module.exports = require("react");

/***/ }),

/***/ "react/jsx-dev-runtime":
/*!****************************************!*\
  !*** external "react/jsx-dev-runtime" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("react/jsx-dev-runtime");

/***/ }),

/***/ "socket.io-client":
/*!***********************************!*\
  !*** external "socket.io-client" ***!
  \***********************************/
/***/ ((module) => {

module.exports = import("socket.io-client");;

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("./pages/results.js"));
module.exports = __webpack_exports__;

})();